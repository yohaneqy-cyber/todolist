{% extends 'base/main.html' %}
{% load static %}
{% load form_tags %}

{% block content %}
<h2 class="form-heading">Add New Task</h2>

<form method="post" enctype="multipart/form-data" class="custom-form">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div class="form-group">
        {{ form.title.label_tag }}
        {{ form.title.errors }}
        {{ form.title|add_class:"form-input" }}
    </div>

    <div class="form-group">
        {{ form.due_date.label_tag }}
        {{ form.due_date.errors }}
        {{ form.due_date|add_class:"form-input" }}
    </div>

    <div class="form-group">
        {{ form.priority.label_tag }}
        {{ form.priority.errors }}
        {{ form.priority|add_class:"form-select" }}
    </div>

    <div class="form-group">
        {{ form.completed.label_tag }}
        {{ form.completed.errors }}
        {{ form.completed|add_class:"form-checkbox" }}
    </div>

    <div class="form-group">
        {{ form.parent.label_tag }}
        {{ form.parent.errors }}
        {{ form.parent|add_class:"form-select" }}
    </div>

    <div class="form-group">
        {{ form.bio.label_tag }}
        {{ form.bio.errors }}
        {{ form.bio|add_class:"form-input" }}
    </div>

    <div class="form-group">
        {{ form.attachment.label_tag }}
        {{ form.attachment.errors }}
        {{ form.attachment|add_class:"form-input" }}
    </div>

    <div class="form-group">
        <label for="remind_in_minutes">Remind me after (minutes):</label>
        <input type="number" name="remind_in_minutes" id="remind_in_minutes" class="form-input" min="1" placeholder="e.g. 10">
    </div>

    <div class="form-group">
        <label for="category">Category:</label>
        <select name="category" id="category" class="form-select">
            <option value="">Select a category</option>
            {% for cat in categories %}
                <option value="{{ cat.id }}">{{ cat.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>{{ form.share_with.label }}</label>
        {% if form.share_with.field.queryset|length > 0 %}
            <ul class="share-with-checkboxes">
                {% for checkbox in form.share_with %}
                    <li class="custom-checkbox">
                        {{ checkbox.tag }}
                        <label for="{{ checkbox.id_for_label }}">{{ checkbox.choice_label }}</label>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No friend to share with.</p>
        {% endif %}
        {{ form.share_with.errors }}
    </div>




    <div class="buttons-container">
    <a href="{% url 'home' %}" class="link-cancel">Cancel</a>
    <button class="btn-save">Save</button>
    </div>
</form>
{% endblock content %}
