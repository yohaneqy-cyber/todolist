{% extends 'base/main.html' %}
{% load form_tags %}
{% block content %}
<h2 class="form-heading">Update Task</h2>

<form method="post" action="{% url 'update_task' task.id %}" enctype="multipart/form-data" class="custom-form">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div class="form-group">
        {{ form.title.label_tag }}
        {{ form.title.errors }}
        {{ form.title|add_class:"form-input" }}
    </div>

    <div class="form-group">
        {{ form.due_date.label_tag }}
        {{ form.due_date.errors }}
        {{ form.due_date|add_class:"form-input" }}
    </div>

    <div class="form-group">
        {{ form.priority.label_tag }}
        {{ form.priority.errors }}
        {{ form.priority|add_class:"form-select" }}
    </div>

    <div class="form-group">
        {{ form.completed.label_tag }}
        {{ form.completed.errors }}
        {{ form.completed|add_class:"form-checkbox" }}
    </div>

    <div class="form-group">
        {{ form.parent.label_tag }}
        {{ form.parent.errors }}
        {{ form.parent|add_class:"form-select" }}
    </div>

    <div class="form-group">
        {{ form.bio.label_tag }}
        {{ form.bio.errors }}
        {{ form.bio|add_class:"form-input" }}
    </div>

    <div class="form-group">
        {{ form.attachment.label_tag }}
        {{ form.attachment.errors }}
        {{ form.attachment|add_class:"form-input" }}
    </div>

    <div class="form-group">
        <label for="category">Category:</label>
        <select name="category" id="category" class="form-select">
            <option value="">Select a category</option>
            {% for cat in categories %}
                <option value="{{ cat.id }}" {% if task.category and task.category.id == cat.id %}selected{% endif %}>{{ cat.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <button type="submit" class="form-button">Update</button>
    </div>

</form>

{% endblock content %}
