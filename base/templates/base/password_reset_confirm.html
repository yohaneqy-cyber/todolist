{% extends 'base/main.html' %}

{% block content %}
<div class="login-container">
  {% if form %}
    <h2 class="login-title">Reset Your Password</h2>

    <form method="post" class="login-form" novalidate>
      {% csrf_token %}

      <p class="login-field">
        <label for="{{ form.new_password1.id_for_label }}" class="login-label">New Password:</label><br>
        {{ form.new_password1 }}
        {% for error in form.new_password1.errors %}
          <div class="error-message">{{ error }}</div>
        {% endfor %}
      </p>

      <p class="login-field">
        <label for="{{ form.new_password2.id_for_label }}" class="login-label">Confirm Password:</label><br>
        {{ form.new_password2 }}
        {% for error in form.new_password2.errors %}
          <div class="error-message">{{ error }}</div>
        {% endfor %}
      </p>

      {% if form.non_field_errors %}
        {% for error in form.non_field_errors %}
          <div class="error-message">{{ error }}</div>
        {% endfor %}
      {% endif %}

      <input type="submit" value="Change Password" class="login-button">
      
    </form>

  {% else %}
    <p class="error-message">Invalid or expired link</p>
  {% endif %}
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const messages = document.querySelectorAll(".error-message");
    if (messages.length === 0) return;

    messages.forEach((msg) => {
      msg.style.transition = "opacity 0.4s ease, transform 0.4s ease";

      setTimeout(() => {
        msg.style.opacity = "0";
        msg.style.transform = "translateY(-10px)";
      }, 2600);

      setTimeout(() => {
        if (msg.parentNode) {
          msg.parentNode.removeChild(msg);
        }
      }, 3000);
    });
  });
</script>
{% endblock %}
